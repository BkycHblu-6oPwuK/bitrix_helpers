# –ú–æ–¥—É–ª—å beeralex.catalog

–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è Bitrix —Å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ (SKU), –∫–æ—Ä–∑–∏–Ω–æ–π, –∑–∞–∫–∞–∑–∞–º–∏ –∏ —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–æ–¥–∞–∂.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üõçÔ∏è –†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- üí∞ –°–∏—Å—Ç–µ–º–∞ —Ü–µ–Ω –∏ —Å–∫–∏–¥–æ–∫ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –∫—É–ø–æ–Ω–æ–≤
- üõí –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- üì¶ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ —Å–≤–æ–π—Å—Ç–≤ –∑–∞–∫–∞–∑–∞
- üåç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ DaData API
- üí≥ –ö–∞—Å—Ç–æ–º–Ω—ã–µ —á–µ–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –∫–∞—Å—Å/–ø–ª–∞—Ç–µ–∂–µ–π
- üîç –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.2+
- Bitrix Framework 25.0+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª—è php 8.2)
- –ú–æ–¥—É–ª–∏: `beeralex.core`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –º–æ–¥—É–ª—å –≤ `/local/modules/beeralex.catalog/`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å Bitrix
3. –ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```php
use Beeralex\Catalog\Service\CatalogService;
use Beeralex\Catalog\Service\Basket\BasketFactory;

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏ —Å–∫–∏–¥–∫–∞–º–∏
$catalogService = service(CatalogService::class);
$products = $catalogService->getProductsWithOffers([1, 2, 3], true, true);

// –†–∞–±–æ—Ç–∞ —Å –∫–æ—Ä–∑–∏–Ω–æ–π
$basketFactory = service(BasketFactory::class);
$basketService = $basketFactory->createBasketServiceForCurrentUser();
$basketService->increment($offerId = 123, $quantity = 2);
```

## –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∫–ª–∞—Å—Å-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫:

```php
namespace App\Repository;

use Beeralex\Catalog\Repository\ProductsRepository as BaseRepository;

class ProductsRepository extends BaseRepository
{
    public function getProducts(array $productIds, bool $onlyActive = true): array
    {
        $products = parent::getProducts($productIds, $onlyActive);
        // –í–∞—à–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
        return $products;
    }
}
```

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `/local/.settings_extra.php`:

```php
use Beeralex\Catalog\Enum\DIServiceKey;
use App\Repository\ProductsRepository;

return [
    'services' => [
        'value' => [
            DIServiceKey::PRODUCT_REPOSITORY->value => [
                'constructor' => static function () {
                    return new ProductsRepository(...);
                }
            ],
        ]
    ]
];
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- `ProductsRepository` - —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
- `OffersRepository` - —Ä–∞–±–æ—Ç–∞ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ (SKU)
- `PriceRepository` - —Ä–∞–±–æ—Ç–∞ —Å —Ü–µ–Ω–∞–º–∏
- `StoreRepository` - —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–∫–ª–∞–¥–∞–º–∏

### –°–µ—Ä–≤–∏—Å—ã
- `CatalogService` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –∫–∞—Ç–∞–ª–æ–≥–∞
- `BasketService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π
- `OrderService` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- `SearchService` - –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `PriceService` - —Ä–∞—Å—á–µ—Ç –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω

### –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
- `BitrixLocationResolver` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –≤ Bitrix
- `DadataService` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DaData API

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è Sale
- `PrepaymentCheck` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —á–µ–∫ —á–∞—Å—Ç–∏—á–Ω–æ–π –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
- `UserRestriction` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- `MyPriceExtraService` - –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø–∞–ø–∫–µ [docs/](./docs/):

- [–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è](./docs/README.md)
- [–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](./docs/repositories.md)
- [–°–µ—Ä–≤–∏—Å—ã](./docs/services.md)
- [–ö–æ—Ä–∑–∏–Ω–∞ –∏ —Å–∫–∏–¥–∫–∏](./docs/basket-services.md)
- [–°–∏—Å—Ç–µ–º–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏](./docs/location.md)
- [–†–∞—Å—à–∏—Ä–µ–Ω–∏—è Sale](./docs/sale-extensions.md)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](./docs/examples.md)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –º–æ–¥—É–ª—è.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–π –º–æ–¥—É–ª—å. ¬© beeralex
